<!-- Annotated Phrases Section - Synchronized with Tablature -->
<div class="tablature-section synchronized" id="annotatedPhrases" data-order="5">
    <div class="section-header">
        <h3>ðŸŽ¼ Annotated Phrases (Structural View)</h3>
    </div>

    <div class="section-content">
        <!-- Zoom Controls (synced with optimal) -->
        <div class="zoom-controls">
            <label>X-Zoom:</label>
            <button onclick="window.zoomController.updateZoom('annotated', 'x', 67)">67%</button>
            <button onclick="window.zoomController.updateZoom('annotated', 'x', 100)">100%</button>
            <button onclick="window.zoomController.updateZoom('annotated', 'x', 150)">150%</button>
            <button onclick="window.zoomController.updateZoom('annotated', 'x', 200)">200%</button>
            <button onclick="window.zoomController.fitToWidth('annotated')">Fit Width</button>
        </div>

        <!-- Scrollable Container (synced with optimal) -->
        <div class="tablature-scroll-container" id="annotatedScrollContainer">
            <svg id="annotatedSvg" width="{{SVG_WIDTH}}" height="400">
                {{PHRASE_ANNOTATIONS}}
            </svg>
        </div>
    </div>
</div>

<style>
/* Synchronized Phrase Annotations Section */
#annotatedPhrases {
    margin-top: 30px;
}

#annotatedScrollContainer {
    overflow-x: auto;
    overflow-y: hidden;
    border: 1px solid #ccc;
    background: white;
    box-sizing: border-box;
}

#annotatedSvg {
    display: block;
}

/* Phrase Boxes */
.phrase-box {
    fill: rgba(0, 128, 128, 0.08);
    stroke: #008080;
    stroke-width: 2;
    stroke-dasharray: 5,5;
    transition: fill 0.2s, stroke 0.2s;
    cursor: pointer;
}

.phrase-box:hover {
    fill: rgba(0, 128, 128, 0.15);
    stroke: #005959;
    stroke-width: 3;
}

/* Parallelism-based styling */
.phrase-box.exact-refrain {
    fill: rgba(255, 215, 0, 0.15);
    stroke: #FFD700;
    stroke-dasharray: none;
    stroke-width: 3;
}

.phrase-box.structural-parallel {
    fill: rgba(52, 152, 219, 0.1);
    stroke: #3498DB;
    stroke-width: 2;
}

.phrase-box.semantic-parallel {
    fill: rgba(155, 89, 182, 0.08);
    stroke: #9B59B6;
    stroke-dasharray: 3,3;
}

/* Semantic domain styling */
.phrase-box.domain-emotion {
    stroke: #E74C3C;
}

.phrase-box.domain-abstract {
    stroke: #9B59B6;
}

.phrase-box.domain-nature {
    stroke: #27AE60;
}

.phrase-box.domain-action {
    stroke: #3498DB;
}

.phrase-box.domain-characters {
    stroke: #F39C12;
}

.phrase-box.domain-vocatives {
    stroke: #E67E22;
}

/* Text Elements */
.phrase-label {
    font-size: 14px;
    font-weight: bold;
    fill: #2C3E50;
    text-anchor: middle;
    pointer-events: none;
}

.parallelism-badge {
    font-size: 11px;
    font-weight: bold;
    text-anchor: middle;
    pointer-events: none;
}

.parallelism-badge.exact {
    fill: #B8860B; /* Dark goldenrod for visibility */
}

.parallelism-badge.structural {
    fill: #2874A6; /* Darker blue */
}

.parallelism-badge.semantic {
    fill: #7D3C98; /* Darker purple */
}

.semantic-icon {
    font-size: 11px;
    text-anchor: middle;
    fill: #555;
    pointer-events: none;
}

.semantic-icon.emotion { fill: #E74C3C; }
.semantic-icon.abstract { fill: #9B59B6; }
.semantic-icon.nature { fill: #27AE60; }
.semantic-icon.action { fill: #3498DB; }
.semantic-icon.characters { fill: #F39C12; }
.semantic-icon.vocatives { fill: #E67E22; }

.function-label {
    font-size: 10px;
    font-style: italic;
    fill: #7F8C8D;
    text-anchor: middle;
    pointer-events: none;
}
</style>
